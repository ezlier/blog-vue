---
title: C++入门(4)指针基础
date: 2025-08-19 11:17:11
tags: C++
image: 'cover/cover-14.jpg'
---

# C++ 指针
指针：特点类型数据在内存中的存储地址，即内存地址。

在C++中，每一个变量都有一个内存位置，每一个内存位置都定义了可使用连字号（&）运算符访问的地址，它表示了在内存中的一个地址。  
所以，指针变量的定义语法：

```c++
int num = 10;
//先声明后赋值
int *p;
p = &num;

//同步声明赋值
int *p = &num;
```

指针指向什么类型的变量就声明什么类型。

`*`符号的两个含义：  

- 声明时：*表示声明指针变量
- 使用时：*表示取指针指向的值

直接使用指针会显示它指向的内存地址，要取值时需要加`*`

-----------------------------

# 野指针和空指针

野指针：被声明但未赋值的指针。这个指针会指向随机的内存空间，可能导致未知问题。  
若直接使用这个指针可能会造成不可预料的后果。

为了避免这种问题，声明的指针要及时赋值，或者设置为空指针。  
`int *p = NULL;`  
`int *p = nullptr;`

----------------------------------

# 动态内存分配

C++代码中，直接创建变量、数组等由C++自动分配内存，称为静态内存管理，不会进行内存空间自动回收。      

为了提供程序运行效率，我们需要手动管理内存。 

- new运算符用于申请并分配内存空间并提供指向该空间的指针
- delete运算符用于释放内存，尽可用于new申请的空间

```c++
指针类型 *p = new type;       //申请普通变量
*p = 10;                 //赋值
delete p;                //删除普通变量

指针类型 *arr = new type [n]; //申请数组
arr[0] = 11              //数组第一个赋值  
delete[] p;              //删除数组
```

-----------------------------

# 指针悬挂

指针悬挂：指针指向的区域被回收。  
这时候再使用这个指针容易引发问题。

---------------------------

# 常量(const)指针

常量指针在C++有3类：  

#### 指向const的指针

语法：  
`const type *指针;`  
`type const *指针;` 
指向区域的数据不可变，但可以更换指向。

#### const指针

语法：  
`type *const 指针 = 地址     //必须初始化地址`  
指针本身不可更改，指向的数据可更改。

#### 指向const的const指针

语法：  
`const type *const 指针 = 地址   //必须初始化地址`  
指针和指向区域都不能改。
